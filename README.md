# Telegram网盘机器人，待完善！
TG：@hy499
## 项目简介
这是一个功能强大的Telegram文件分享机器人，可以帮助您和您的用户在Telegram上分享和管理文件。
☁您的文件存储于Telegram服务器。您可以使用本机器人在线播放视频，上传下载文件，也可使用本机器分享文件。
本机器人为云服务，所有数据均保存于Telegram服务器！

## 主要功能

### 📤 文件上传
- 支持多种文件类型：文档、图片、视频、音频、压缩包等
- 最大支持 2GB 单个文件
- 自动分类和识别文件类型
- 存储在 Telegram 频道中，不占用本地空间
- 上传成功返回文件ID和分享链接

### 🔍 强大的搜索，等待开发中.......
- 支持关键词精确/模糊搜索
- 按文件类型筛选（图片、视频、音频、文档）
- 按文件大小筛选
- 组合条件搜索
- 搜索历史记录

### 🔗 分享链接
- 生成专属分享链接
- 支持密码保护
- 链接统计（查看次数、下载次数）
- 永久有效，无需登录

### ⬇️ 多方式下载
- 发送链接直接下载
- 使用文件ID下载
- 批量下载支持
- 下载历史记录

### 📂 文件管理
- 我的文件列表
- 我的分享链接
- 文件详情查看
- 文件删除

### 🔄 转存功能
- 转存其他机器人的分享链接
- 转存频道中的文件
- 快速复制文件到自己的网盘

### 📈 数据统计
- 个人上传下载统计
- 全局热门文件排行
- 最新文件推荐
- 存储空间使用情况

### 👥 用户管理
- 自动注册登录
- 用户权限控制
- VIP会员功能
- 用户封禁机制

### ⚙️ 管理员功能
- 用户管理（封禁/解封）
- 文件管理
- 统计数据查看
- 系统配置

## 技术特点

### 🏗️ 系统架构
- 使用python-telegram-bot 20.x版本
- SQLite数据库存储数据
- 支持Redis缓存（可选）
- 完整的日志系统

### 🔒 安全特性
- 用户身份验证
- 密码加密存储
- 权限控制
- 封禁机制

### ⚡ 性能优化
- 异步处理
- 数据库连接池
- 缓存机制
- 日志轮转

## 环境要求
- Python 3.10+
## 快速开始

### 1. 环境准备

```bash
# 克隆项目
git clone <项目地址>
cd Telegram-Cloud-Bot

# 创建虚拟环境（推荐）
python -m venv venv
source venv/bin/activate  # Linux/Mac
# 或
venv\Scripts\activate  # Windows

# 安装依赖
pip install -r requirements.txt
```

### 2. 配置机器人

#### 2.1 创建Telegram Bot

1. 打开Telegram，搜索 @BotFather
2. 发送 /newbot 创建新机器人
3. 获取Bot Token

#### 2.2 创建存储频道

1. 创建一个Telegram频道（公开或私有）
2. 添加机器人为管理员
3. 授予以下权限：
   - 发送消息
   - 编辑消息
   - 删除消息
   - 管理频道

#### 2.3 修改配置文件

编辑 `config.json` 文件：

```json
{
  "telegram": {
    "token": "YOUR_BOT_TOKEN_HERE",
    "admin_id": 123456789,
    "channel_id": -1001234567890
  }
}
```

### 3. 启动机器人

```bash
# 方式1：使用启动脚本（推荐）
python start.py

# 方式2：直接运行
python main.py

# 方式3：后台运行（Linux/Mac）
python start.py --daemon
```

### 4. 测试机器人

1. 在Telegram中找到你的机器人
2. 发送 /start 命令
3. 尝试上传文件

## 使用说明

### 📤 上传文件

直接发送文件给机器人即可：
- 支持图片、视频、音频、文档、压缩包等
- 最大支持 2GB 单个文件
- 机器人会自动分类并保存到频道

### 🔍 搜索文件

| 命令 | 说明 |
|------|------|
| `/search 关键词` | 按名称搜索文件 |
| `/search type:photo` | 搜索图片 |
| `/search type:video` | 搜索视频 |
| `/search type:audio` | 搜索音频 |
| `/search type:document` | 搜索文档 |
| `/search size:>10M` | 搜索大于10MB的文件 |
| `/search 电影 type:video` | 组合搜索 |

### 🔗 生成分享链接

| 命令 | 说明 |
|------|------|
| `/share [文件ID]` | 生成分享链接 |
| `/share [文件ID] password:密码` | 带密码的分享链接 |

**分享链接使用：**
- 直接发送链接给好友
- 好友点击链接即可下载文件
- 支持密码保护的链接更安全

### ⬇️ 下载文件

**三种方式：**
1. 发送分享链接给机器人
2. 使用 `/download [文件ID]` 命令
3. 在我的文件中点击文件按钮

### 📂 我的文件

| 命令 | 说明 |
|------|------|
| `/myfiles` | 查看我上传的所有文件 |
| 点击文件编号 | 重新发送/下载该文件 |

### 🔗 我的分享

| 命令 | 说明 |
|------|------|
| `/myshare` | 查看我创建的所有分享链接 |

### 🗑️ 删除文件

```
/delete [文件ID]  # 删除指定文件
```

### ℹ️ 文件详情

```
/info [文件ID]  # 查看文件详细信息
```

### 📈 发现好文件

| 命令 | 说明 |
|------|------|
| `/popular` | 下载最多的热门文件 |
| `/recent` | 最近上传的新文件 |

### 🔄 转存文件

| 命令 | 说明 |
|------|------|
| `/transfer [分享链接]` | 转存其他机器人的文件 |
| `/transfer [消息ID]` | 转存频道中的文件 |

### 👤 个人中心

| 命令 | 说明 |
|------|------|
| `/profile` | 查看我的资料和存储使用情况 |
| `/stats` | 查看我的上传下载统计 |

### 🎯 快速入门

```
1. 发送 /start 开始使用
2. 直接发送文件上传
3. 使用 /search 查找文件
4. 使用 /share 生成分享链接
```

### 📖 查看帮助

```
/help  # 查看完整帮助
```

### 👥 管理员命令

| 命令 | 说明 |
|------|------|
| `/admin` | 打开管理员面板 |
| `/ban [用户ID]` | 封禁用户 |
| `/unban [用户ID]` | 解封用户 |
| `/stats_all` | 全局统计数据 |

## 配置说明

### 配置文件结构

```json
{
  "name": "项目名称",
  "version": "版本号",
  
  "telegram": {
    "token": "Bot Token",
    "admin_id": "管理员ID",
    "channel_id": "频道ID"
  },
  
  "database": {
    "type": "数据库类型",
    "path": "数据库路径"
  },
  
  "upload": {
    "max_file_size": 2000,
    "allowed_types": ["类型列表"],
    "max_downloads_per_file": 0
  },
  
  "user": {
    "default_storage_limit": 5368709120,
    "vip_storage_limit": 53687091200
  }
}
```

## 常见问题

### Q1: 机器人无法启动？
A: 请检查：
1. Bot Token是否正确
2. 网络连接是否正常
3. 配置文件格式是否正确

### Q2: 无法上传文件？
A: 请检查：
1. 机器人是否有频道管理权限
2. 文件大小是否超过限制
3. 存储空间是否已满

### Q3: 无法下载文件？
A: 请检查：
1. 文件是否还存在
2. 用户是否被封禁
3. 下载次数是否超限

### Q4: 分享链接打不开？
A: 请检查：
1. 链接是否过期
2. 是否需要密码
3. 文件是否已被删除

## 许可证

本项目采用 MIT 许可证开源。

---

**Happy Sharing! 🎉**

